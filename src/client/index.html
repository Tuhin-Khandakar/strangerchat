<!doctype html>
<html lang="en" class="no-js">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover" />
    <title>STRNGR | Conversations without baggage.</title>
    <meta name="description"
        content="Start a conversation without profiles or pressure. STRNGR is a space built for safety, calm, and genuine human connection." />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{BASE_URL}}/" />
    <meta property="og:title" content="STRNGR | Conversations without baggage." />
    <meta property="og:description"
        content="Start a conversation without profiles or pressure. STRNGR is a space built for safety, calm, and genuine human connection." />
    <meta property="og:image" content="{{BASE_URL}}/logo.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="{{BASE_URL}}/" />
    <meta property="twitter:title" content="STRNGR | Conversations without baggage." />
    <meta property="twitter:description"
        content="Start a conversation without profiles or pressure. STRNGR is a space built for safety, calm, and genuine human connection." />
    <meta property="twitter:image" content="{{BASE_URL}}/logo.png" />

    <!-- Resource Hints & Lazy Loading -->
    <link rel="prefetch" href="terms.html" />
    <link rel="prefetch" href="privacy.html" />
    <!-- Vite handles script preloading automatically in production -->

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&subset=latin&display=swap" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&subset=latin&display=swap"
        rel="stylesheet" />

    <!-- Dynamic Favicons -->
    <link rel="icon" type="image/png" href="logo.png" media="(prefers-color-scheme: light)" />
    <link rel="icon" type="image/png" href="logo_dark.png" media="(prefers-color-scheme: dark)" />
    <link rel="apple-touch-icon" href="logo.png" />

    <link rel="preload" as="image" href="logo.webp" type="image/webp" />
    <link rel="preload" as="image" href="logo_dark.webp" type="image/webp" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#2563EB" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="STRNGR" />
</head>

<body>
    <!-- Accessibility Skip Link -->
    <a href="#main-content" class="skip-link">Skip to content</a>

    <!-- Screen Reader Announcements -->
    <div id="announcer" class="sr-only" aria-live="assertive" aria-atomic="true"></div>

    <!-- Browser Compatibility Warning -->
    <div id="browser-warning" class="browser-warning" style="display: none" role="alert">
        <div class="warning-content">
            <strong>Browser Unsupported:</strong> Some features may not work. Please upgrade to a modern
            browser (Chrome, Edge, Firefox, Safari).
            <button onclick="this.parentElement.parentElement.remove()" class="close-warning"
                aria-label="Dismiss warning">
                &times;
            </button>
        </div>
    </div>

    <!-- Landing Page -->
    <div id="landing-screen" class="screen active" role="region" aria-label="Landing Page">
        <header class="header" role="banner">
            <div class="container header-content-wrapper">
                <div class="brand">
                    <picture style="display: contents">
                        <source srcset="logo.webp" type="image/webp" />
                        <img src="logo.png" class="logo-small logo-light" alt="" aria-hidden="true" />
                    </picture>
                    <picture style="display: contents">
                        <source srcset="logo_dark.webp" type="image/webp" />
                        <img src="logo_dark.png" class="logo-small logo-dark" alt="" aria-hidden="true" />
                    </picture>
                    <span class="brand-text">STRNGR</span>
                </div>
                <button id="theme-toggle" class="theme-toggle" aria-label="Switch to dark mode"
                    title="Toggle dark mode">
                    <span class="icon-sun" aria-hidden="true">‚òÄÔ∏è</span>
                    <span class="icon-moon" aria-hidden="true">üåô</span>
                </button>
            </div>
        </header>

        <main class="hero" id="main-content" role="main">
            <div class="container">
                <div id="banned-message" class="banned-alert" role="alert" style="display: none">
                    You have been banned for violating our terms of service.
                </div>

                <div class="hero-content">
                    <h1>Conversations start <br />without baggage.</h1>
                    <p class="subtext">No profiles. No pressure. Just humans.</p>

                    <div class="cta-group">
                        <div class="tos-wrapper">
                            <input type="checkbox" id="tos-check" aria-required="true" required />
                            <label for="tos-check" id="tos-label">I am 18+ and agree to the <a
                                    href="terms.html">Terms</a> &
                                <a href="privacy.html">Privacy</a></label>
                        </div>
                        <button id="start-btn" class="primary-btn pulse" disabled aria-label="Start chatting now">
                            üëâ Start Chatting
                        </button>
                        <a href="#how-it-works" class="secondary-link" aria-label="Learn how it works">Learn how it
                            works</a>
                    </div>
                </div>

                <div class="trust-strip" role="list">
                    <div class="trust-item" role="listitem">
                        <div class="icon-circle">
                            <img src="icons/user.svg" alt="" aria-hidden="true" class="trust-icon" />
                        </div>
                        <span>No sign-up required</span>
                    </div>
                    <div class="trust-item" role="listitem">
                        <div class="icon-circle">
                            <img src="icons/lock.svg" alt="" aria-hidden="true" class="trust-icon" />
                        </div>
                        <span>Anonymous by default</span>
                    </div>
                    <div class="trust-item" role="listitem">
                        <div class="icon-circle">
                            <img src="icons/shield.svg" alt="" aria-hidden="true" class="trust-icon" />
                        </div>
                        <span>Moderated for safety</span>
                    </div>
                    <div class="trust-item" role="listitem">
                        <div class="icon-circle">
                            <img src="icons/smartphone.svg" alt="" aria-hidden="true" class="trust-icon" />
                        </div>
                        <span>Mobile & Desktop</span>
                    </div>
                </div>
            </div>
        </main>

        <section id="how-it-works" class="section" aria-labelledby="how-it-works-title">
            <div class="container">
                <h2 id="how-it-works-title" class="section-title">How it works</h2>
                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number" aria-hidden="true">1</div>
                        <h3>Open the site</h3>
                        <p>No accounts. No setup.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number" aria-hidden="true">2</div>
                        <h3>Get matched instantly</h3>
                        <p>One-on-one, anonymous.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number" aria-hidden="true">3</div>
                        <h3>Leave anytime</h3>
                        <p>No history, no trace.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section why-section" aria-labelledby="why-strngr-title">
            <div class="container">
                <h2 id="why-strngr-title" class="section-title">Why STRNGR</h2>
                <div class="features-grid" role="list">
                    <div class="feature-item" role="listitem">
                        <img src="icons/check.svg" alt="" aria-hidden="true" class="check-icon" />
                        <span>Built for respectful conversations</span>
                    </div>
                    <div class="feature-item" role="listitem">
                        <img src="icons/check.svg" alt="" aria-hidden="true" class="check-icon" />
                        <span>Designed for speed & simplicity</span>
                    </div>
                    <div class="feature-item" role="listitem">
                        <img src="icons/check.svg" alt="" aria-hidden="true" class="check-icon" />
                        <span>No data selling</span>
                    </div>
                    <div class="feature-item" role="listitem">
                        <img src="icons/check.svg" alt="" aria-hidden="true" class="check-icon" />
                        <span>No profile stalking</span>
                    </div>
                    <div class="feature-item" role="listitem">
                        <img src="icons/check.svg" alt="" aria-hidden="true" class="check-icon" />
                        <span>No algorithmic addiction</span>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer" role="contentinfo">
            <div class="container">
                <nav class="footer-links" aria-label="Footer Navigation">
                    <a href="terms.html">Terms</a>
                    <a href="privacy.html">Privacy</a>
                    <a href="mailto:tuhink.business@gmail.com">Report Abuse</a>
                </nav>
                <p class="built-with">Built with care</p>
                <div class="online-status" aria-label="Online status">
                    <span class="online-dot pulse" aria-hidden="true"></span>
                    <span id="online-count" role="status">Online: ...</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Chat Interface -->
    <div id="chat-screen" class="screen" role="main" aria-label="Chat Interface" tabindex="-1">
        <nav class="chat-nav" role="navigation" aria-label="Chat controls">
            <div class="chat-nav-left">
                <picture style="display: contents">
                    <source srcset="logo.webp" type="image/webp" />
                    <img src="logo.png" alt="STRNGR logo" class="logo-img-small logo-light" />
                </picture>
                <picture style="display: contents">
                    <source srcset="logo_dark.webp" type="image/webp" />
                    <img src="logo_dark.png" alt="STRNGR logo" class="logo-img-small logo-dark" />
                </picture>
                <div class="status-indicator" id="chat-status" aria-live="polite">Searching...</div>
            </div>
            <div class="chat-nav-right">
                <div id="connection-quality" class="connection-quality conn-offline" title="Connection Quality"
                    role="img" aria-label="Connection Quality">
                    <div class="bar" aria-hidden="true"></div>
                    <div class="bar" aria-hidden="true"></div>
                    <div class="bar" aria-hidden="true"></div>
                </div>
                <button id="theme-toggle-chat" class="theme-toggle" aria-label="Toggle dark mode"
                    title="Toggle dark mode">
                    <span class="icon-sun" aria-hidden="true">‚òÄÔ∏è</span>
                    <span class="icon-moon" aria-hidden="true">üåô</span>
                </button>
                <button id="settings-btn" class="settings-btn" aria-label="Open settings" title="Settings">
                    ‚öôÔ∏è
                </button>
                <button id="report-btn" class="report-btn" aria-label="Report current stranger">
                    Report
                </button>
            </div>
        </nav>

        <div id="chat-box" class="chat-container" role="log" aria-live="polite" aria-atomic="false"
            aria-label="Chat history">
            <div class="system-msg">Connecting to server...</div>
        </div>

        <div class="typing-indicator" id="typing-ui" aria-live="polite">
            <div class="typing-dots" aria-hidden="true"><span></span><span></span><span></span></div>
            <span style="margin-left: 8px">Stranger is typing...</span>
        </div>

        <div class="input-area">
            <button id="next-btn" class="next-btn" aria-label="Find next stranger (Esc)">Next</button>
            <div class="input-wrapper">
                <textarea id="msg-input" placeholder="Type a message..." disabled rows="1" aria-label="Write a message"
                    aria-multiline="true"></textarea>
                <button id="send-btn" disabled aria-label="Send message (Enter)">Send</button>
            </div>
        </div>
    </div>

    <script type="module" src="./scripts/app.js"></script>
    <script type="module">
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Remove no-js class
                document.documentElement.classList.remove('no-js');

                // Feature Check
                const required = ['WebSocket', 'localStorage'];
                const missing = required.filter((f) => !(f in window));
                if (missing.length > 0) {
                    const warning = document.getElementById('browser-warning');
                    if (warning) warning.style.display = 'block';
                }

                navigator.serviceWorker
                    .register('/sw.js')
                    .then((reg) => { if (import.meta.env.DEV) console.log('SW Registered!', reg); })
                    .catch((err) => { if (import.meta.env.DEV) console.error('SW Registration failed:', err); });
            });
        }
    </script>
</body>

</html>